define(["jquery","core/yui"],function(o,u){var a={confirmDialogue:null,init:function(o,e,n,i){var c=o;u.use("moodle-core-notification",function(){u.one(n)&&(a.confirmDialogue=new M.core.dialogue({headerContent:e,bodyContent:u.one(n),draggable:!0,visible:!1,center:!0,modal:!0,width:null,extraClasses:["mod_quiz_preflight_popup"]}),u.one(o).on("click",a.displayDialogue),u.one("#id_cancel").on("click",a.hideDialogue),c=a.confirmDialogue.get("boundingBox").one('[name="submitbutton"]')),i&&u.one(c).on("click",a.launchQuizPopup,a,i)})},displayDialogue:function(o){o&&o.halt(),a.confirmDialogue.show()},hideDialogue:function(o){o&&o.halt(),a.confirmDialogue.hide(o)},launchQuizPopup:function(e,n){e.halt(),u.use("moodle-core-formchangechecker","io-form",function(){M.core_formchangechecker.reset_form_dirty_state();var o=e.target.ancestor("form");window.openpopup(e,{url:o.get("action")+"?"+u.IO.stringify(o).replace(/\bcancel=/,"x="),windowname:"quizpopup",options:n,fullscreen:!0})})}};return a});