define(["jquery","core/log","core/config"],function(a,t,o){var n={ismarking:!1,currentzone:null,startpoint:0,startpointtime:0,endpoint:0,endpointtime:0,init:function(){a(".mplayer-bumper").bind("click",this.bump_in),a(".mplayer-punchinout").bind("click",this.start_marking),t.debug("AMD Mplayer Asessables initialized")},start_marking:function(){var t=a(this).attr("id").replace("mplayer-punchinout-",""),e=a("#flp"+t).attr("class").match(/video([0-9]+)/),e=0+parseInt(e[1]),e=a("#mplayer-progress-"+t+"_"+e+" .mod-mplayer-progressbar-outer .progressbar-segment.newzone");a(e).removeClass("is-hidden"),a(e).css("left","0%"),n.currentzone=e,n.ismarking=!0,a("#mplayer-punchinout-"+t).attr("value","Stop marking zone"),a("#mplayer-punchinout-"+t).css("background-color","red"),a("#mplayer-punchinout-"+t).css("color","white"),a("#mplayer-punchinout-"+t).off("click"),a("#mplayer-punchinout-"+t).bind("click",n.stop_marking),a("#mplayer-punchinout-"+t).addClass("is-marking")},stop_marking:function(){var t=a(this).attr("id").replace("mplayer-punchinout-",""),e=a("#flp"+t).attr("class").match(/video([0-9]+)/),e=0+parseInt(e[1]),r=(a("#mplayer-punchinout-"+t).attr("value","Start marking zone"),a("#mplayer-punchinout-"+t).css("background-color","initial"),a("#mplayer-punchinout-"+t).css("color","black"),o.wwwroot+"/mod/mplayer/pro/ajax/services.php?");r=(r=(r=(r=(r=r+"what=addzone&mplayerid="+t)+"&clipid="+e+"&startpoint="+n.startpoint)+"&endpoint="+n.endpoint)+"&startpointtime="+n.startpointtime)+"&endpointtime="+n.endpointtime,a.get(r,function(){},"json");a("#mplayer-progress-"+t+"_"+e+" .mod-mplayer-progressbar-outer .progressbar-segment.newzone").addClass("is-hidden"),n.ismarking=!1,n.startpoint=n.endpoint,a("#mplayer-punchinout-"+t).off("click"),a("#mplayer-punchinout-"+t).bind("click",n.start_marking),a("#mplayer-punchinout-"+t).removeClass("is-marking")},delete_zone:function(){var t=a(this),e=t.attr("data-zone").split("-"),r=e[0],n=e[1],e=e[2],i=o.wwwroot+"/mod/mplayer/pro/ajax/services.php?";a.get(i+"&what=deletezone"+("&mplayerid="+r)+("&clipid="+n)+("&zoneid="+e),function(){a("body").remove("#"+t.attr("id"))},"json")},bump_in:function(){var t=a(this).attr("id").replace("mplayer-bumper-",""),e=a("#flp"+t).attr("class").match(/video([0-9]+)/),e=0+parseInt(e[1]),r=(r=(r=(r=o.wwwroot+"/mod/mplayer/pro/ajax/services.php?")+"what=bumpzone"+("&mplayerid="+t))+("&clipid="+e)+("&progress="+n.startpoint))+("&progresstime="+n.startpointtime);a.get(r,function(t){"true"==t.matched&&(a("#mplayer-progress-"+t.mpid+"_"+t.index).html(t.progressbar),a("#mplayer-assess-counts-"+t.mpid+"_"+t.index).html(t.counter))},"json")}};return window.modmplayerassessables=n});