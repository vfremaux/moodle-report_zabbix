define(["jquery","core/log"],function(o,s){var l;return{init:function(e){l=e,o("#id-system-mtd-selectall-write").bind("click",this.selectall_system_write),o("#id-indexer-mtd-selectall-write").bind("click",this.selectall_indexer_write),o("#id-author-mtd-selectall-write").bind("click",this.selectall_author_write),o("#id-system-mtd-selectall-read").bind("click",this.selectall_system_read),o("#id-indexer-mtd-selectall-read").bind("click",this.selectall_indexer_read),o("#id-author-mtd-selectall-read").bind("click",this.selectall_author_read),o("#id-mandatory-mtd-selectall").bind("click",this.selectall_mandatory),o("#id-system-mtd-selectnone-write").bind("click",this.selectnone_system_write),o("#id-indexer-mtd-selectnone-write").bind("click",this.selectnone_indexer_write),o("#id-author-mtd-selectnone-write").bind("click",this.selectnone_author_write),o("#id-system-mtd-selectnone-read").bind("click",this.selectnone_system_read),o("#id-indexer-mtd-selectnone-read").bind("click",this.selectnone_indexer_read),o("#id-author-mtd-selectnone-read").bind("click",this.selectnone_author_read),o("#id-mandatory-mtd-selectnone").bind("click",this.selectnone_mandatory),o(".mtd-check").bind("change",this.toggle_childs),o(".mtd-parent").bind("init",this.init_parent),o(".mtd-parent").trigger("init"),o(".mtd-widget").bind("rowchange",this.widget_check),s.debug("AMD Mod sharedresource metadata configuration form initialized")},selectall_system_write:function(){o("."+l+"-system-write").prop("checked",!0),o("."+l+"-system-read").prop("checked",!0),o("."+l+"-system-read").prop("disabled",!0)},selectall_system_read:function(){o("."+l+"-system-read").prop("checked",!0)},selectall_indexer_write:function(){o("."+l+"-indexer-write").prop("checked",!0),o("."+l+"-indexer-read").prop("checked",!0),o("."+l+"-indexer-read").prop("disabled",!0)},selectall_indexer_read:function(){o("."+l+"-indexer-read").prop("checked",!0)},selectall_author_write:function(){o("."+l+"-author-write").prop("checked",!0),o("."+l+"-author-read").prop("checked",!0),o("."+l+"-author-read").prop("disabled",!0)},selectall_author_read:function(){o("."+l+"-author-read").prop("checked",!0)},selectall_mandatory:function(){o("."+l+"-mandatory").prop("checked",!0)},selectnone_system_write:function(){o("."+l+"-system-write").prop("checked",!1),o("."+l+"-system-read").prop("disabled",!1)},selectnone_system_read:function(){o("."+l+"-system-read").prop("checked",!1)},selectnone_indexer_write:function(){o("."+l+"-indexer-write").prop("checked",!1),o("."+l+"-indexer-read").prop("disabled",!1)},selectnone_indexer_read:function(){o("."+l+"-indexer-read").prop("checked",!1)},selectnone_author_write:function(){o("."+l+"-author-write").prop("checked",!1),o("."+l+"-author-read").prop("disabled",!1)},selectnone_author_read:function(){o("."+l+"-author-read").prop("checked",!1)},selectnone_mandatory:function(){o("."+l+"-mandatory").prop("checked",!1)},init_parent:function(){var e,t,d=o(this),r=d.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);r&&(e=r[2],t=r[3],r=r[4],!0===d.prop("checked")?o("."+l+"-"+e+"-"+t+" "+r).prop("disabled",!1):(o("."+l+"-"+e+"-"+t+" "+r).prop("checked",!1),o("."+l+"-"+e+"-"+t+" "+r).prop("disabled",!0)),o("."+l+"-widget-"+r).trigger("rowchange"))},toggle_childs:function(){s.debug("AMD Mod sharedresource metadata TOGGLE CHILD");var e=o(this),t=e.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);if(t){var d=t[2],r=t[3],t=t[4],i=[],c=t;if((c=c.replace(/_[^_]+$/,""))!=t)for(var a=0;i.push(c),a++,!(c=c.replace(/_[^_]+$/,"")).match(/^\d+$/)&&a<100;);if(!0===e.prop("checked")){o("."+l+"-"+d+"-"+r+"-"+t).prop("checked",!0),o("."+l+"-"+d+"-"+r+"-"+t).prop("disabled",!1),"write"===r&&(o("#"+l+"-"+d+"-read-"+t).prop("checked",!0),o("#"+l+"-"+d+"-read-"+t).prop("disabled",!0),o("."+l+"-"+d+"-read-"+t).prop("checked",!0),o("."+l+"-"+d+"-read-"+t).prop("disabled",!0));for(var n=i.shift();n;)o("#"+l+"-"+d+"-"+r+"-"+n).prop("checked",!0),o("#"+l+"-"+d+"-"+r+"-"+n).prop("disabled",!1),"write"===r&&(o("#"+l+"-"+d+"-read-"+n).prop("checked",!0),o("#"+l+"-"+d+"-read-"+n).prop("disabled",!0)),n=i.shift(),s.debug("AMD Mod sharedresource metadata Checking parent")}else o("."+l+"-"+d+"-"+r+"-"+t).prop("checked",!1),o("."+l+"-"+d+"-"+r+"-"+t).prop("disabled",!0),"write"===r&&(o("#"+l+"-"+d+"-read-"+t).prop("disabled",!1),o("."+l+"-"+d+"-read-"+t).prop("disabled",!1));o("#"+l+"-widget-"+t).trigger("rowchange")}},widget_check:function(){s.debug("AMD Mod sharedresource metadata WIDGET CHECK");var e,t,d=o(this).attr("id").match(/([^-]*)-([^-]*)-(.*)$/);d&&(d=d[3],o("#"+l+"-widget-"+d).length&&(e=o("#"+l+"-system-read-"+d).prop("checked"),t=o("#"+l+"-indexer-read-"+d).prop("checked"),o("#"+l+"-author-read-"+d).prop("checked")||t||e?o("#"+l+"-widget-"+d).prop("disabled",!1):(o("#"+l+"-widget-"+d).prop("checked",!1),o("#"+l+"-widget-"+d).prop("disabled",!0))))}}});