define(["jquery","core/log","core/config"],function(s,e,a){var n={init:function(){s("#id_s_mod_tracker_licensekey").bind("change",this.check_product_key),s("#id_s_mod_tracker_licensekey").trigger("change"),e.debug("AMD Pro js initialized for tracker module")},check_product_key:function(){var e=s(this),r=e.val().replace(/-/g,""),i=r.substr(0,14),r=r.substr(14,2),i=n.checksum(i),c=' <img src="'+a.wwwroot+'/pix/i/valid.png">',o=' <img src="'+a.wwwroot+'/pix/i/warning.png">',t=' <img src="'+a.wwwroot+'/pix/i/invalid.png">',_=' <img src="'+a.wwwroot+'/pix/i/ajaxloader.gif">';r==i?(r=(r=(r=a.wwwroot+"/mod/tracker/pro/ajax/services.php?what=license&service=check")+"&customerkey="+e.val())+"&provider="+s("#id_s_mod_tracker_licenseprovider").val(),s("#id_s_mod_tracker_licensekey + img").remove(),s("#id_s_mod_tracker_licensekey").after(_),s.get(r,function(e){e.match(/SET OK/)?(s("#id_s_mod_tracker_licensekey + img").remove(),s("#id_s_mod_tracker_licensekey").after(c)):(s("#id_s_mod_tracker_licensekey + img").remove(),s("#id_s_mod_tracker_licensekey").after(t))},"html")):(s("#id_s_mod_tracker_licensekey + img").remove(),s("#id_s_mod_tracker_licensekey").after(o))},checksum:function(e){var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),c=i.length,o=e.split(""),t=0;for(r in o)t+=o[r].charCodeAt(0);e=Math.floor(t/c)%c;return""+i[t%c]+i[e]}};return n});