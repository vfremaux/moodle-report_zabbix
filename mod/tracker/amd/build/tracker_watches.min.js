define(["jquery","core/config","core/str","core/log"],function(s,d,t,e){return{init:function(){s(".tracker-events-prefs").bind("click",this.updatewatch),e.debug("AMD Tracker watch prefs initialized")},updatewatch:function(){var e=s(this),t=e.attr("id").match(/(\d+)-(\d+)-(\w+)-(\w+)/),a=t[1],r=t[2],c=t[3],i=t[4],t=(t=(t=(t=d.wwwroot+"/mod/tracker/ajax/service.php")+("?id="+a)+"&what=updatewatch")+("&ccid="+r)+("&event="+c))+("&state="+i)+("&sesskey="+d.sesskey);s.get(t,function(){var t="#watch-"+c+"-"+r+"-img";1!=i?s(t).addClass("tracker-shadow"):s(t).removeClass("tracker-shadow"),e.attr("id",a+"-"+r+"-"+c+"-"+(i?0:1))},"html")}}});