define(["jquery","mod_assign/grading_events"],function(t,n){function e(){this._region=t('[data-region="review-panel-content"]'),this.registerEventListeners()}return e.prototype._region=null,e.prototype.getReviewPanel=function(e){return void 0===this._region.data("panel-owner")&&this._region.data("review-panel-plugin",e),this._region.data("review-panel-plugin")==e&&this._region[0]},e.prototype.getTogglePanelButton=function(){return this.getPanelElement().find('[data-region="review-panel-toggle"]')},e.prototype.getPanelElement=function(){return t('[data-region="review-panel"]')},e.prototype.getPanelContentElement=function(){return t('[data-region="review-panel-content"]')},e.prototype.togglePanel=function(){this.getPanelElement().hasClass("collapsed")?t(document).trigger(n.EXPAND_REVIEW_PANEL):t(document).trigger(n.COLLAPSE_REVIEW_PANEL)},e.prototype.collapsePanel=function(){this.getPanelElement().addClass("collapsed").removeClass("grade-panel-collapsed"),this.getPanelContentElement().attr("aria-hidden",!0)},e.prototype.expandPanel=function(){this.getPanelElement().removeClass("collapsed"),this.getPanelContentElement().removeAttr("aria-hidden")},e.prototype.registerEventListeners=function(){var e=this.getTogglePanelButton(),e=(e.click(function(e){this.togglePanel(),e.preventDefault()}.bind(this)),e.keydown(function(e){e.metaKey||e.shiftKey||e.altKey||e.ctrlKey||13!==e.keyCode&&32!==e.keyCode||(this.togglePanel(),e.preventDefault())}.bind(this)),t(document));e.on(n.COLLAPSE_REVIEW_PANEL,function(){this.collapsePanel()}.bind(this)),e.on(n.COLLAPSE_GRADE_PANEL,function(){this.expandPanel(),this.getPanelElement().addClass("grade-panel-collapsed")}.bind(this)),e.on(n.EXPAND_REVIEW_PANEL,function(){this.expandPanel()}.bind(this)),e.on(n.EXPAND_GRADE_PANEL,function(){this.getPanelElement().removeClass("grade-panel-collapsed")}.bind(this))},e});