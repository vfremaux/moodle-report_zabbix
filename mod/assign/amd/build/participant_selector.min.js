define(["core/ajax","jquery","core/templates"],function(s,o,d){return{processResults:function(t,e){return e},transport:function(t,e,i,n){var r=o(t).attr("data-assignmentid"),t=o(t).attr("data-groupid"),a=o('[data-region="configure-filters"] input[type="checkbox"]'),u=[];a.each(function(t,e){u[o(e).attr("name")]=o(e).prop("checked")}),s.call([{methodname:"mod_assign_list_participants",args:{assignid:r,groupid:t,filter:e,limit:30,includeenrolments:!1}}])[0].then(function(t){var a=[],s=o("[data-showuseridentity]").data("showuseridentity").split(",");return o.each(t,function(t,i){var n=i,r=[],e=!0;u.filter_submitted&&!i.submitted&&(e=!1),u.filter_notsubmitted&&i.submitted&&(e=!1),u.filter_requiregrading&&!i.requiregrading&&(e=!1),(e=u.filter_grantedextension&&!i.grantedextension?!1:e)&&(o.each(s,function(t,e){void 0!==i[e]&&""!==i[e]&&(n.hasidentity=!0,r.push(i[e]))}),n.identity=r.join(", "),a.push(d.render("mod_assign/list_participant_user_summary",n).then(function(t){return{value:i.id,label:t}})))}),o.when.apply(o,a)}).then(function(){var t=[];arguments[0]&&(t=Array.prototype.slice.call(arguments)),i(t)}).catch(n)}}});