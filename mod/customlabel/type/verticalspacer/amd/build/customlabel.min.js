define(["jquery","core/config","core/log"],function(r,o,s){var l={catched:0,verticalspacerlocation:[],verticalspacerpagelocation:[],init:function(){r(".custombox-verticalspacer-handle").off(),r(".custombox-verticalspacer-handle").bind("mousedown",this.mousedown),r(".custombox-verticalspacer-handle").bind("mouseup",this.mouseup),r(".custombox-verticalspacer-handle").bind("mousemove",this.mousemove),s.debug("AMD customlabel verticalspacer initialized")},mousedown:function(e){var a=r(this),a=(s.debug("Catching "+a.attr("id")),a.attr("id").replace("verticalspacer-handle-","")),t="custombox-verticalspacer-"+a,a=a.split("-")[1],t=r("#"+t).css("height").replace(/em|px/,"");return l.verticalspacerlocation[a]=parseInt(t),l.verticalspacerpagelocation[a]=e.pageY,l.catched=!0,e.stopImmediatePropagation(),!1},mouseup:function(e){var a=r(this);s.debug("Releasing "+a.attr("id"));var t=a.attr("id").replace("custombox-verticalspacer-","").split("-"),c=t[0],t=t[1],a=(l.verticalspacerlocation[t]=0,l.verticalspacerpagelocation[t]=0,l.catched=!1,a.css("height")),i=(i=(i=o.wwwroot+"/mod/customlabel/type/verticalspacer/ajax/service.php")+"?id="+c+"&cid="+t)+"&height="+a.replace(/em|px/,"");return r.get(i),e.stopImmediatePropagation(),!1},mousemove:function(e){var a,t,c;if(l.catched)return a=r(this),s.debug("Moving "+a.attr("id")),a=a.attr("id").replace("verticalspacer-handle-",""),c=a.split("-")[1],0!=l.verticalspacerlocation[c]&&(t=e.pageY-l.verticalspacerpagelocation[c],c=l.verticalspacerlocation[c]+t+"px",r("#"+("custombox-verticalspacer-"+a)).css("height",c)),e.stopImmediatePropagation(),!1}};return l});