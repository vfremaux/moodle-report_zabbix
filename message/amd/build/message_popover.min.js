define(["jquery","core/custom_interaction_events","core/pubsub","core_message/message_drawer_events"],function(n,t,i,r){var s='[data-region="count-container"]',a=function(){i.publish(r.TOGGLE_VISIBILITY)},c=function(t){return function(){var e=t.find(s),n=parseInt(e.text(),10);isNaN(n)||!n||n<2?e.addClass("hidden"):e.text(n-=1)}};return{init:function(e){e=n(e),e=e,t.define(e,[t.events.activate]),e.on(t.events.activate,function(e,n){a(),n.originalEvent.preventDefault()}),i.subscribe(r.CONVERSATION_READ,c(e)),i.subscribe(r.CONTACT_REQUEST_ACCEPTED,c(e)),i.subscribe(r.CONTACT_REQUEST_DECLINED,c(e))}}});