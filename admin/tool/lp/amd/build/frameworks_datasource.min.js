define(["jquery","core/ajax","core/notification"],function(r,n,c){return{list:function(e,t){e={context:{contextid:e}};return r.extend(e,void 0===t?{}:t),n.call([{methodname:"core_competency_list_competency_frameworks",args:e}])[0]},processResults:function(e,t){var n=[];return r.each(t,function(e,t){n.push({value:t.id,label:t.shortname+" "+t.idnumber})}),n},transport:function(e,t,n){var i=r(e),o=i.data("contextid"),i=i.data("onlyvisible");if(!o)throw new Error("The attribute data-contextid is required on "+e);this.list(o,{query:t,onlyvisible:i}).then(n).catch(c.exception)}}});