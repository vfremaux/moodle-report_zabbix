define(["jquery","core/ajax","core/templates"],function(r,a,s){return{processResults:function(e,t){var n=[];return r.each(t,function(e,t){n.push({value:t.id,label:t._label})}),n},transport:function(e,t,c,n){var o=parseInt(r(e).data("contextid"),10),e=r(e).data("includes");a.call([{methodname:"tool_lp_search_cohorts",args:{query:t,context:{contextid:o},includes:e}}])[0].then(function(e){var n=[],o=0;return r.each(e.cohorts,function(e,t){n.push(s.render("tool_lp/form-cohort-selector-suggestion",t))}),r.when.apply(r.when,n).then(function(){var n=arguments;r.each(e.cohorts,function(e,t){t._label=n[o],o++}),c(e.cohorts)})}).catch(n)}}});