define(["jquery","core/ajax","core/str","tool_lp/competencypicker","core/templates","core/notification"],function(n,e,r,t,c,i){function l(e,t,o,n,r){this.buttonSelector=e,this.inputHiddenSelector=t,this.staticElementSelector=o,this.frameworkId=n,this.pageContextId=r,this.registerEvents()}return l.prototype.buttonSelector=null,l.prototype.inputHiddenSelector=null,l.prototype.staticElementSelector=null,l.prototype.frameworkId=null,l.prototype.pageContextId=null,l.prototype.setParent=function(t){var o=this;(0!==t.competencyId?e.call([{methodname:"core_competency_read_competency",args:{id:t.competencyId}}])[0].done(function(e){n(o.staticElementSelector).html(e.shortname),n(o.inputHiddenSelector).val(e.id)}):r.get_string("competencyframeworkroot","tool_lp").then(function(e){n(o.staticElementSelector).html(e),n(o.inputHiddenSelector).val(t.competencyId)})).fail(i.exception)},l.prototype.registerEvents=function(){var o=this;n(o.buttonSelector).on("click",function(e){e.preventDefault();e=new t(o.pageContextId,o.frameworkId,"self",!1);e._render=function(){var t=this;return t._preRender().then(function(){var e={competencies:t._competencies,framework:t._getFramework(t._frameworkId),frameworks:t._frameworks,search:t._searchText,singleFramework:t._singleFramework};return c.render("tool_lp/competency_picker_competencyform",e)})},e.on("save",function(e,t){o.setParent(t)}),e.display()})},{init:function(e,t,o,n,r){new l(e,t,o,n,r)}}});