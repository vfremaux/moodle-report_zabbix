define(["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],function(r,i,c,t,d,s){function e(){this.registerEvents()}var o='[data-action="deletecategory"]';return e.prototype.registerEvents=function(){r(o).click(function(e){e.preventDefault();var a=r(this).data("id"),e=r(this).data("name");t.get_strings([{key:"deletecategory",component:"tool_dataprivacy"},{key:"deletecategorytext",component:"tool_dataprivacy",param:e},{key:"delete"}]).then(function(e){var t=e[0],o=e[1],n=e[2];return d.create({title:t,body:o,type:d.types.SAVE_CANCEL}).then(function(e){return e.setSaveButtonText(n),e.getRoot().on(s.save,function(){i.call([{methodname:"tool_dataprivacy_delete_category",args:{id:a}}])[0].done(function(e){e.result?r('tr[data-categoryid="'+a+'"]').remove():c.addNotification({message:e.warnings[0].message,type:"error"})}).fail(c.exception)}),e.getRoot().on(s.hidden,function(){e.destroy()}),e})}).done(function(e){e.show()}).fail(c.exception)})},{init:function(){return new e}}});