define(["jquery","core/sortable_list","core/ajax","core/notification"],function(n,e,r,d){return{init:function(t,i){var o;new e("#"+t+" tbody").getElementName=function(t){return n.Deferred().resolve(t.attr("data-name"))},n("#"+t+" tbody tr").on(e.EVENTS.DRAGSTART,function(t,e){o=e.sourceList.children().index(e.element),setTimeout(function(){n(".sortable-list-is-dragged").width(e.element.width())},501)}).on(e.EVENTS.DROP,function(t,e){var n=e.targetList.children().index(e.element),a=e.element.find("[data-action="+i+"]");e.positionChanged&&a.length&&(e={methodname:"tool_xmldb_invoke_move_action",args:{action:i,dir:a.attr("data-dir"),table:a.attr("data-table"),field:a.attr("data-field"),key:a.attr("data-key"),index:a.attr("data-index"),position:n-o}},r.call([e])[0].fail(d.exception))})}}});