define(["jquery","core/log","core/config","core/str","core/modal_factory","core/modal_events"],function(i,a,c,r,s,l){"use strict";var t="[data-action]",y='[data-action="makecurrent"]',p='[data-action="inactivate"]',d='[data-action="delete"]';function e(t){this.base=t,this.initEvents()}return e.prototype.initEvents=function(){this.base.on("click",t,function(t){t.stopPropagation();var e,o,n=i(t.currentTarget);if(n.is(y))e=r.get_strings([{key:"activating",component:"tool_policy"},{key:"activateconfirm",component:"tool_policy",param:{name:n.closest("[data-policy-name]").attr("data-policy-name"),revision:n.closest("[data-policy-revision]").attr("data-policy-revision")}},{key:"activateconfirmyes",component:"tool_policy"}]);else if(n.is(p))e=r.get_strings([{key:"inactivating",component:"tool_policy"},{key:"inactivatingconfirm",component:"tool_policy",param:{name:n.closest("[data-policy-name]").attr("data-policy-name"),revision:n.closest("[data-policy-revision]").attr("data-policy-revision")}},{key:"inactivatingconfirmyes",component:"tool_policy"}]);else{if(!n.is(d))return void a.error("unknown action type detected","tool_policy/managedocsactions");e=r.get_strings([{key:"deleting",component:"tool_policy"},{key:"deleteconfirm",component:"tool_policy",param:{name:n.closest("[data-policy-name]").attr("data-policy-name"),revision:n.closest("[data-policy-revision]").attr("data-policy-revision")}},{key:"delete",component:"core"}])}t.preventDefault(),e.then(function(t){return o=t,s.create({title:o[0],body:o[1],type:s.types.SAVE_CANCEL})}).then(function(t){return t.setSaveButtonText(o[2]),t.getRoot().on(l.save,function(){window.location.href=n.attr("href")+"&sesskey="+c.sesskey+"&confirm=1"}),t.getRoot().on(l.hidden,function(){t.destroy()}),t.show(),!0}).catch(function(t){return a.error(t),!1})})},{init:function(t){t=i(document.getElementById(t));if(t.length)return new e(t);throw new Error("managedocsactions: Invalid base element identifier")}}});