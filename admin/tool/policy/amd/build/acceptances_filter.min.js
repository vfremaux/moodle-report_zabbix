define(["jquery","core/form-autocomplete","core/str","core/notification"],function(a,n,e,o){var i="#unified-filters";return{init:function(){var r;M.util.js_pending("acceptances_filter_datasource"),e.get_strings([{key:"filterplaceholder",component:"tool_policy"},{key:"nofiltersapplied",component:"tool_policy"}]).done(function(e){var t=e[0],e=e[1];n.enhance(i,!0,"tool_policy/acceptances_filter_datasource",t,!1,!0,e,!0).then(function(){M.util.js_complete("acceptances_filter_datasource")}).fail(o.exception)}).fail(o.exception),r=a(i).val(),a(i).on("change",function(){var e=a(this).val(),o=[],i=[],c=!1;if(a.each(e,function(e,t){var n=t.split(":",2);if(2!==n.length)return i.push(t),!0;t=n[0],n=n[1];return void 0!==o[t]&&(c=!0),o[t]=n,!0}),c){var t,n=[];for(t in o)n.push(t+":"+o[t]);n=n.concat(i),a(this).val(n)}r.join(",")!=e.join(",")&&this.form.submit()})},getForm:function(){return a(i).closest("form")}}});