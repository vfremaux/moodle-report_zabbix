!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("video.js")):"function"==typeof define&&define.amd?define(["media_videojs/video-lazy"],function(t){return e.Youtube=i(t)}):e.Youtube=i(e.videojs)}(this,function(e){"use strict";var t,i,s,o,r,a=e.browser.IS_IOS||e.browser.IS_ANDROID,n=e.getTech("Tech"),h=e.extend(n,{constructor:function(t,e){n.call(this,t,e),this.setPoster(t.poster),this.setSrc(this.options_.source,!0),this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-youtube",a&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),h.isApiReady?this.initYTPlayer():h.apiReadyQueue.push(this))}.bind(this))},dispose:function(){var t;this.ytPlayer?(this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy()):-1!==(t=h.apiReadyQueue.indexOf(this))&&h.apiReadyQueue.splice(t,1),this.ytPlayer=null,this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",""),this.el_.parentNode.removeChild(this.el_),n.prototype.dispose.call(this)},createEl:function(){var t=document.createElement("div"),e=(t.setAttribute("id",this.options_.techId),t.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute"),t.setAttribute("class","vjs-tech"),document.createElement("div"));return e.appendChild(t),a||this.options_.ytControls||((t=document.createElement("div")).setAttribute("class","vjs-iframe-blocker"),t.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),t.onclick=function(){this.pause()}.bind(this),e.appendChild(t)),e},initYTPlayer:function(){var e,i={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};void 0!==this.options_.autohide&&(i.autohide=this.options_.autohide),void 0!==this.options_.cc_load_policy&&(i.cc_load_policy=this.options_.cc_load_policy),void 0!==this.options_.ytControls&&(i.controls=this.options_.ytControls),void 0!==this.options_.disablekb&&(i.disablekb=this.options_.disablekb),void 0!==this.options_.end&&(i.end=this.options_.end),void 0!==this.options_.color&&(i.color=this.options_.color),i.controls?void 0!==this.options_.fs&&(i.fs=this.options_.fs):i.fs=0,void 0!==this.options_.end&&(i.end=this.options_.end),void 0!==this.options_.hl?i.hl=this.options_.hl:void 0!==this.options_.language&&(i.hl=this.options_.language.substr(0,2)),void 0!==this.options_.iv_load_policy&&(i.iv_load_policy=this.options_.iv_load_policy),void 0!==this.options_.list?i.list=this.options_.list:this.url&&void 0!==this.url.listId&&(i.list=this.url.listId),void 0!==this.options_.listType&&(i.listType=this.options_.listType),void 0!==this.options_.modestbranding&&(i.modestbranding=this.options_.modestbranding),void 0!==this.options_.playlist&&(i.playlist=this.options_.playlist),void 0!==this.options_.playsinline&&(i.playsinline=this.options_.playsinline),void 0!==this.options_.rel&&(i.rel=this.options_.rel),void 0!==this.options_.showinfo&&(i.showinfo=this.options_.showinfo),void 0!==this.options_.start&&(i.start=this.options_.start),void 0!==this.options_.theme&&(i.theme=this.options_.theme),void 0!==this.options_.customVars&&(e=this.options_.customVars,Object.keys(e).forEach(function(t){i[t]=e[t]})),this.activeVideoId=this.url?this.url.videoId:null,this.activeList=i.list,this.ytPlayer=new YT.Player(this.options_.techId,{videoId:this.activeVideoId,playerVars:i,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}})},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute(),1<this.ytPlayer.getAvailablePlaybackRates().length&&(this.featuresPlaybackRate=!0),this.playerReady_=!0,this.triggerReady(),this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(t){t=t.data;if(t!==this.lastState&&!this.errorNumber)switch(this.lastState=t){case-1:this.trigger("loadstart"),this.trigger("loadedmetadata"),this.trigger("durationchange"),this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate"),this.trigger("durationchange"),this.trigger("playing"),this.trigger("play"),this.isSeeking&&this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay"),this.isSeeking?this.onSeeked():this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(t){this.errorNumber=t.data,this.trigger("pause"),this.trigger("error")},error:function(){var t=1e3+this.errorNumber;switch(this.errorNumber){case 5:return{code:t,message:"Error while trying to play the video"};case 2:case 100:return{code:t,message:"Unable to find the video"};case 101:case 150:return{code:t,message:"Playback on other Websites has been disabled by the video owner."}}return{code:t,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(t){t={videoId:t};this.options_.start&&(t.startSeconds=this.options_.start),this.options_.end&&(t.endEnd=this.options_.end),this.ytPlayer.loadVideoById(t)},cueVideoById_:function(t){t={videoId:t};this.options_.start&&(t.startSeconds=this.options_.start),this.options_.end&&(t.endEnd=this.options_.end),this.ytPlayer.cueVideoById(t)},src:function(t){return t&&this.setSrc({src:t}),this.source},poster:function(){return a?null:this.poster_},setPoster:function(t){this.poster_=t},setSrc:function(t){t&&t.src&&(delete this.errorNumber,this.source=t,this.url=h.parseUrl(t.src),this.options_.poster||this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!a?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(t){this.options_.autoplay=t},loop:function(){return this.options_.loop},setLoop:function(t){this.options_.loop=t},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return!this.ytPlayer||this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(t){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime()),this.isSeeking||(this.wasPausedBeforeSeek=this.paused()),this.ytPlayer.seekTo(t,!0),this.trigger("timeupdate"),this.trigger("seeking"),this.isSeeking=!0,this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==t&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?e.createTimeRange(0,this.ytPlayer.getDuration()):e.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval),this.isSeeking=!1,this.wasPausedBeforeSeek&&this.pause(),this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(t){this.ytPlayer&&this.ytPlayer.setPlaybackRate(t)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return!!this.ytPlayer&&this.lastState===YT.PlayerState.ENDED},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(t){this.ytPlayer&&this.ytPlayer.setVolume(100*t)},muted:function(){return!!this.ytPlayer&&this.ytPlayer.isMuted()},setMuted:function(t){this.ytPlayer&&(this.muted(!0),t?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return e.createTimeRange();var t=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return e.createTimeRange(0,t)},preload:function(){},load:function(){},reset:function(){},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var t="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var e=new Image;e.onload=function(){if("naturalHeight"in e){if(e.naturalHeight<=90||e.naturalWidth<=120)return}else if(e.height<=90||e.width<=120)return;this.poster_=t,this.trigger("posterchange")}.bind(this),e.onerror=function(){},e.src=t}catch(t){}}});h.isSupported=function(){return!0},h.canPlaySource=function(t){return h.canPlayType(t.type)},h.canPlayType=function(t){return"video/youtube"===t},h.parseUrl=function(t){var e={videoId:null},i=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);i&&11===i[2].length&&(e.videoId=i[2]);return(i=t.match(/[?&]list=([^#\&\?]+)/))&&i[1]&&(e.listId=i[1]),e},h.apiReadyQueue=[],"undefined"!=typeof document&&(t="https://www.youtube.com/iframe_api",s=!(i=function(){YT.ready(function(){h.isApiReady=!0;for(var t=0;t<h.apiReadyQueue.length;++t)h.apiReadyQueue[t].initYTPlayer()})}),o=document.createElement("script"),(r=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,r),o.onload=function(){s||(s=!0,i())},o.onreadystatechange=function(){s||"complete"!==this.readyState&&"loaded"!==this.readyState||(s=!0,i())},o.src=t,r=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }",o=document.head||document.getElementsByTagName("head")[0],(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r)),o.appendChild(t)),void 0!==e.registerTech?e.registerTech("Youtube",h):e.registerComponent("Youtube",h)});