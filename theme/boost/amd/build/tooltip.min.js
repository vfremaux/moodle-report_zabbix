define(["exports","jquery","core/popper","./util"],function(t,e,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=o(e),S=o(n),w=o(i);function o(t){return t&&t.__esModule?t:{default:t}}function D(){return(D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n=function(r){var u,h,f,e="tooltip",i="bs.tooltip",t=".".concat(i),g=r.fn[e],m="bs-tooltip",p=new RegExp("(^|\\s)".concat(m,"\\S+"),"g"),d={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},v={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},_={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},s="show",y="out",E={HIDE:"hide".concat(t),HIDDEN:"hidden".concat(t),SHOW:"show".concat(t),SHOWN:"shown".concat(t),INSERTED:"inserted".concat(t),CLICK:"click".concat(t),FOCUSIN:"focusin".concat(t),FOCUSOUT:"focusout".concat(t),MOUSEENTER:"mouseenter".concat(t),MOUSELEAVE:"mouseleave".concat(t)},a="fade",l="show",T=".tooltip-inner",b=".arrow",c="hover",C="focus",k="click",A="manual",n=(u=o,f=[{key:"_jQueryInterface",value:function(n){return this.each(function(){var t=r(this).data(i),e="object"===O(n)&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new o(this,e),r(this).data(i,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'.concat(n,'"'));t[n]()}})}},{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return _}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return i}},{key:"Event",get:function(){return E}},{key:"EVENT_KEY",get:function(){return t}},{key:"DefaultType",get:function(){return d}}],(h=[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(t){var e,n;this._isEnabled&&(t?(e=this.constructor.DATA_KEY,(n=r(t.currentTarget).data(e))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),r(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)):r(this.getTipElement()).hasClass(l)?this._leave(null,this):this._enter(null,this))}},{key:"dispose",value:function(){clearTimeout(this._timeout),r.removeData(this.element,this.constructor.DATA_KEY),r(this.element).off(this.constructor.EVENT_KEY),r(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&r(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var e=this;if("none"===r(this.element).css("display"))throw new Error("Please use show on visible elements");var t,n,i=r.Event(this.constructor.Event.SHOW);this.isWithContent()&&this._isEnabled&&(r(this.element).trigger(i),t=r.contains(this.element.ownerDocument.documentElement,this.element),!i.isDefaultPrevented()&&t&&(i=this.getTipElement(),t=w.default.getUID(this.constructor.NAME),i.setAttribute("id",t),this.element.setAttribute("aria-describedby",t),this.setContent(),this.config.animation&&r(i).addClass(a),t="function"==typeof this.config.placement?this.config.placement.call(this,i,this.element):this.config.placement,t=this._getAttachment(t),this.addAttachmentClass(t),n=!1===this.config.container?document.body:r(this.config.container),r(i).data(this.constructor.DATA_KEY,this),r.contains(this.element.ownerDocument.documentElement,this.tip)||r(i).appendTo(n),r(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new S.default(this.element,i,{placement:t,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:b},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),r(i).addClass(l),"ontouchstart"in document.documentElement&&r("body").children().on("mouseover",null,r.noop),n=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,r(e.element).trigger(e.constructor.Event.SHOWN),t===y&&e._leave(null,e)},w.default.supportsTransitionEnd()&&r(this.tip).hasClass(a)?r(this.tip).one(w.default.TRANSITION_END,n).emulateTransitionEnd(o._TRANSITION_DURATION):n()))}},{key:"hide",value:function(t){function e(){n._hoverState!==s&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),r(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()}var n=this,i=this.getTipElement(),o=r.Event(this.constructor.Event.HIDE);r(this.element).trigger(o),o.isDefaultPrevented()||(r(i).removeClass(l),"ontouchstart"in document.documentElement&&r("body").children().off("mouseover",null,r.noop),this._activeTrigger[k]=!1,this._activeTrigger[C]=!1,this._activeTrigger[c]=!1,w.default.supportsTransitionEnd()&&r(this.tip).hasClass(a)?r(i).one(w.default.TRANSITION_END,e).emulateTransitionEnd(150):e(),this._hoverState="")}},{key:"update",value:function(){null!==this._popper&&this._popper.scheduleUpdate()}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"addAttachmentClass",value:function(t){r(this.getTipElement()).addClass("".concat(m,"-").concat(t))}},{key:"getTipElement",value:function(){return this.tip=this.tip||r(this.config.template)[0],this.tip}},{key:"setContent",value:function(){var t=r(this.getTipElement());this.setElementContent(t.find(T),this.getTitle()),t.removeClass("".concat(a," ").concat(l))}},{key:"setElementContent",value:function(t,e){var n=this.config.html;"object"===O(e)&&(e.nodeType||e.jquery)?n?r(e).parent().is(t)||t.empty().append(e):t.text(r(e).text()):t[n?"html":"text"](e)}},{key:"getTitle",value:function(){return this.element.getAttribute("data-original-title")||("function"==typeof this.config.title?this.config.title.call(this.element):this.config.title)}},{key:"_getAttachment",value:function(t){return v[t.toUpperCase()]}},{key:"_setListeners",value:function(){var n=this;this.config.trigger.split(" ").forEach(function(t){var e;"click"===t?r(n.element).on(n.constructor.Event.CLICK,n.config.selector,function(t){return n.toggle(t)}):t!==A&&(e=t===c?n.constructor.Event.MOUSEENTER:n.constructor.Event.FOCUSIN,t=t===c?n.constructor.Event.MOUSELEAVE:n.constructor.Event.FOCUSOUT,r(n.element).on(e,n.config.selector,function(t){return n._enter(t)}).on(t,n.config.selector,function(t){return n._leave(t)})),r(n.element).closest(".modal").on("hide.bs.modal",function(){return n.hide()})}),this.config.selector?this.config=D({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var t=O(this.element.getAttribute("data-original-title"));!this.element.getAttribute("title")&&"string"===t||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(t,e){var n=this.constructor.DATA_KEY;(e=e||r(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),r(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?C:c]=!0),r(e.getTipElement()).hasClass(l)||e._hoverState===s?e._hoverState=s:(clearTimeout(e._timeout),e._hoverState=s,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===s&&e.show()},e.config.delay.show):e.show())}},{key:"_leave",value:function(t,e){var n=this.constructor.DATA_KEY;(e=e||r(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),r(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?C:c]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=y,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===y&&e.hide()},e.config.delay.hide):e.hide())}},{key:"_isWithActiveTrigger",value:function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}},{key:"_getConfig",value:function(t){return"number"==typeof(t=D({},this.constructor.Default,r(this.element).data(),t)).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),w.default.typeCheckConfig(e,t,this.constructor.DefaultType),t}},{key:"_getDelegateConfig",value:function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t}},{key:"_cleanTipClass",value:function(){var t=r(this.getTipElement()),e=t.attr("class").match(p);null!==e&&0<e.length&&t.removeClass(e.join(""))}},{key:"_handlePopperPlacementChange",value:function(t){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))}},{key:"_fixTransition",value:function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(r(t).removeClass(a),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)}}])&&N(u.prototype,h),f&&N(u,f),o);function o(t,e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");if(void 0===S.default)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return r.fn[e]=n._jQueryInterface,r.fn[e].Constructor=n,r.fn[e].noConflict=function(){return r.fn[e]=g,n._jQueryInterface},n}(e.default,S.default);t.default=n});