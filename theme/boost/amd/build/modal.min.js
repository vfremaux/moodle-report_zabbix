define(["exports","jquery","./util"],function(t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=n(e),I=n(i);function n(t){return t&&t.__esModule?t:{default:t}}function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(){return(D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i,n=arguments[e];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function C(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i=function(s){var t,n,h,e="modal",a="bs.modal",i=".".concat(a),u=s.fn[e],_={backdrop:!0,keyboard:!0,focus:!0,show:!0},f={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},r={HIDE:"hide".concat(i),HIDDEN:"hidden".concat(i),SHOW:"show".concat(i),SHOWN:"shown".concat(i),FOCUSIN:"focusin".concat(i),RESIZE:"resize".concat(i),CLICK_DISMISS:"click.dismiss".concat(i),KEYDOWN_DISMISS:"keydown.dismiss".concat(i),MOUSEUP_DISMISS:"mouseup.dismiss".concat(i),MOUSEDOWN_DISMISS:"mousedown.dismiss".concat(i),CLICK_DATA_API:"click".concat(i).concat(".data-api")},g="modal-scrollbar-measure",m="modal-backdrop",p="modal-open",l="fade",d="show",v=".modal-dialog",y='[data-toggle="modal"]',S='[data-dismiss="modal"]',b=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",k=".sticky-top",E=".navbar-toggler",c=(t=o,h=[{key:"_jQueryInterface",value:function(i,n){return this.each(function(){var t=s(this).data(a),e=D({},o.Default,s(this).data(),"object"===w(i)&&i);if(t||(t=new o(this,e),s(this).data(a,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'.concat(i,'"'));t[i](n)}else e.show&&t.show(n)})}},{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return _}}],(n=[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var e,i=this;this._isTransitioning||this._isShown||(I.default.supportsTransitionEnd()&&s(this._element).hasClass(l)&&(this._isTransitioning=!0),e=s.Event(r.SHOW,{relatedTarget:t}),s(this._element).trigger(e),this._isShown||e.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),s(document.body).addClass(p),this._setEscapeEvent(),this._setResizeEvent(),s(this._element).on(r.CLICK_DISMISS,S,function(t){return i.hide(t)}),s(this._dialog).on(r.MOUSEDOWN_DISMISS,function(){s(i._element).one(r.MOUSEUP_DISMISS,function(t){s(t.target).is(i._element)&&(i._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return i._showElement(t)})))}},{key:"hide",value:function(t){var e=this;t&&t.preventDefault(),!this._isTransitioning&&this._isShown&&(t=s.Event(r.HIDE),s(this._element).trigger(t),this._isShown&&!t.isDefaultPrevented()&&(this._isShown=!1,(t=I.default.supportsTransitionEnd()&&s(this._element).hasClass(l))&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),s(document).off(r.FOCUSIN),s(this._element).removeClass(d),s(this._element).off(r.CLICK_DISMISS),s(this._dialog).off(r.MOUSEDOWN_DISMISS),t?s(this._element).one(I.default.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(300):this._hideModal()))}},{key:"dispose",value:function(){s.removeData(this._element,a),s(window,document,this._element,this._backdrop).off(i),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_getConfig",value:function(t){return t=D({},_,t),I.default.typeCheckConfig(e,t,f),t}},{key:"_showElement",value:function(t){function e(){i._config.focus&&i._element.focus(),i._isTransitioning=!1,s(i._element).trigger(o)}var i=this,n=I.default.supportsTransitionEnd()&&s(this._element).hasClass(l),o=(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,n&&I.default.reflow(this._element),s(this._element).addClass(d),this._config.focus&&this._enforceFocus(),s.Event(r.SHOWN,{relatedTarget:t}));n?s(this._dialog).one(I.default.TRANSITION_END,e).emulateTransitionEnd(300):e()}},{key:"_enforceFocus",value:function(){var e=this;s(document).off(r.FOCUSIN).on(r.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===s(e._element).has(t.target).length&&e._element.focus()})}},{key:"_setEscapeEvent",value:function(){var e=this;this._isShown&&this._config.keyboard?s(this._element).on(r.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||s(this._element).off(r.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){var e=this;this._isShown?s(window).on(r.RESIZE,function(t){return e.handleUpdate(t)}):s(window).off(r.RESIZE)}},{key:"_hideModal",value:function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){s(document.body).removeClass(p),t._resetAdjustments(),t._resetScrollbar(),s(t._element).trigger(r.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&(s(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(t){var e,i=this,n=s(this._element).hasClass(l)?l:"";this._isShown&&this._config.backdrop?(e=I.default.supportsTransitionEnd()&&n,this._backdrop=document.createElement("div"),this._backdrop.className=m,n&&s(this._backdrop).addClass(n),s(this._backdrop).appendTo(document.body),s(this._element).on(r.CLICK_DISMISS,function(t){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===i._config.backdrop?i._element.focus():i.hide())}),e&&I.default.reflow(this._backdrop),s(this._backdrop).addClass(d),t&&(e?s(this._backdrop).one(I.default.TRANSITION_END,t).emulateTransitionEnd(150):t())):!this._isShown&&this._backdrop?(s(this._backdrop).removeClass(d),n=function(){i._removeBackdrop(),t&&t()},I.default.supportsTransitionEnd()&&s(this._element).hasClass(l)?s(this._backdrop).one(I.default.TRANSITION_END,n).emulateTransitionEnd(150):n()):t&&t()}},{key:"_adjustDialog",value:function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft="".concat(this._scrollbarWidth,"px")),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight="".concat(this._scrollbarWidth,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var t,e,o=this;this._isBodyOverflowing&&(s(b).each(function(t,e){var i=s(e)[0].style.paddingRight,n=s(e).css("padding-right");s(e).data("padding-right",i).css("padding-right","".concat(parseFloat(n)+o._scrollbarWidth,"px"))}),s(k).each(function(t,e){var i=s(e)[0].style.marginRight,n=s(e).css("margin-right");s(e).data("margin-right",i).css("margin-right","".concat(parseFloat(n)-o._scrollbarWidth,"px"))}),s(E).each(function(t,e){var i=s(e)[0].style.marginRight,n=s(e).css("margin-right");s(e).data("margin-right",i).css("margin-right","".concat(parseFloat(n)+o._scrollbarWidth,"px"))}),t=document.body.style.paddingRight,e=s("body").css("padding-right"),s("body").data("padding-right",t).css("padding-right","".concat(parseFloat(e)+this._scrollbarWidth,"px")))}},{key:"_resetScrollbar",value:function(){s(b).each(function(t,e){var i=s(e).data("padding-right");void 0!==i&&s(e).css("padding-right",i).removeData("padding-right")}),s("".concat(k,", ").concat(E)).each(function(t,e){var i=s(e).data("margin-right");void 0!==i&&s(e).css("margin-right",i).removeData("margin-right")});var t=s("body").data("padding-right");void 0!==t&&s("body").css("padding-right",t).removeData("padding-right")}},{key:"_getScrollbarWidth",value:function(){var t=document.createElement("div"),e=(t.className=g,document.body.appendChild(t),t.getBoundingClientRect().width-t.clientWidth);return document.body.removeChild(t),e}}])&&C(t.prototype,n),h&&C(t,h),o);function o(t,e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this._config=this._getConfig(e),this._element=t,this._dialog=s(t).find(v)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return s(document).on(r.CLICK_DATA_API,y,function(t){var e,i=this,n=I.default.getSelectorFromElement(this),n=(n&&(e=s(n)[0]),s(e).data(a)?"toggle":D({},s(e).data(),s(this).data())),o=("A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault(),s(e).one(r.SHOW,function(t){t.isDefaultPrevented()||o.one(r.HIDDEN,function(){s(i).is(":visible")&&i.focus()})}));c._jQueryInterface.call(s(e),n,this)}),s.fn[e]=c._jQueryInterface,s.fn[e].Constructor=c,s.fn[e].noConflict=function(){return s.fn[e]=u,c._jQueryInterface},c}(e.default);t.default=i});