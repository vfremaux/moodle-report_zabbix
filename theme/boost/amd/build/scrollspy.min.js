define(["exports","jquery","./util"],function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=o(e),S=o(n);function o(t){return t&&t.__esModule?t:{default:t}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(){return(O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,o=arguments[e];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function H(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n=function(i){var t,f,e,n="scrollspy",o="bs.scrollspy",r=".".concat(o),h=i.fn[n],u={offset:10,method:"auto",target:""},g={offset:"number",method:"string",target:"(string|element)"},s={ACTIVATE:"activate".concat(r),SCROLL:"scroll".concat(r),LOAD_DATA_API:"load".concat(r).concat(".data-api")},_="dropdown-item",l="active",d='[data-spy="scroll"]',v=".active",p=".nav, .list-group",m=".nav-link",y=".nav-item",w=".list-group-item",E=".dropdown",C=".dropdown-item",T=".dropdown-toggle",b="offset",k="position",a=(t=c,e=[{key:"_jQueryInterface",value:function(n){return this.each(function(){var t=i(this).data(o),e="object"===A(n)&&n;if(t||(t=new c(this,e),i(this).data(o,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'.concat(n,'"'));t[n]()}})}},{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return u}}],(f=[{key:"refresh",value:function(){var e=this,t=this._scrollElement===this._scrollElement.window?b:k,o="auto"===this._config.method?t:this._config.method,r=o===k?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),i.makeArray(i(this._selector)).map(function(t){var e,t=S.default.getSelectorFromElement(t);if(e=t?i(t)[0]:e){var n=e.getBoundingClientRect();if(n.width||n.height)return[i(e)[o]().top+r,t]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})}},{key:"dispose",value:function(){i.removeData(this._element,o),i(this._scrollElement).off(r),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null}},{key:"_getConfig",value:function(t){var e;return"string"!=typeof(t=O({},u,t)).target&&((e=i(t.target).attr("id"))||(e=S.default.getUID(n),i(t.target).attr("id",e)),t.target="#".concat(e)),S.default.typeCheckConfig(n,t,g),t}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_getOffsetHeight",value:function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}},{key:"_process",value:function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t)return e=this._targets[this._targets.length-1],void(this._activeTarget!==e&&this._activate(e));if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;)this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(void 0===this._offsets[o+1]||t<this._offsets[o+1])&&this._activate(this._targets[o])}},{key:"_activate",value:function(e){this._activeTarget=e,this._clear();var t=(t=this._selector.split(",")).map(function(t){return"".concat(t,'[data-target="').concat(e,'"],')+"".concat(t,'[href="').concat(e,'"]')}),t=i(t.join(","));t.hasClass(_)?(t.closest(E).find(T).addClass(l),t.addClass(l)):(t.addClass(l),t.parents(p).prev("".concat(m,", ").concat(w)).addClass(l),t.parents(p).prev(y).children(m).addClass(l)),i(this._scrollElement).trigger(s.ACTIVATE,{relatedTarget:e})}},{key:"_clear",value:function(){i(this._selector).filter(v).removeClass(l)}}])&&H(t.prototype,f),e&&H(t,e),c);function c(t,e){var n=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector="".concat(this._config.target," ").concat(m,",")+"".concat(this._config.target," ").concat(w,",")+"".concat(this._config.target," ").concat(C),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,i(this._scrollElement).on(s.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}return i(window).on(s.LOAD_DATA_API,function(){for(var t=i.makeArray(i(d)),e=t.length;e--;){var n=i(t[e]);a._jQueryInterface.call(n,n.data())}}),i.fn[n]=a._jQueryInterface,i.fn[n].Constructor=a,i.fn[n].noConflict=function(){return i.fn[n]=h,a._jQueryInterface},a}(e.default);t.default=n});