define(["jquery","core/modal_events","core/modal_registry","core/modal","core/modal_save_cancel","core/modal_confirm","core/modal_cancel","core/templates","core/notification","core/custom_interaction_events"],function(i,l,d,e,t,o,n,v,s,u){function m(o,e,n){function t(e,t){a=i(e.currentTarget),o.then(function(e){return c&&n.preShowCallback(a,e),e.show(),e}),t.originalEvent.preventDefault()}var r,a=null,c="function"==typeof n.preShowCallback;Array.isArray(e)?(r=e[1],e=e[0],u.define(e,[u.events.activate]),e.on(u.events.activate,r,t)):(u.define(e,[u.events.activate]),e.on(u.events.activate,t)),o.then(function(e){return e.getRoot().on(l.hidden,function(){null!==a&&a.focus()}),e})}var r="core/modal",a="core/modal_save_cancel",c="core/modal_save_cancel",C="core/modal_cancel",f={DEFAULT:"DEFAULT",SAVE_CANCEL:"SAVE_CANCEL",CONFIRM:"CONFIRM",CANCEL:"CANCEL"},_=(d.register(f.DEFAULT,e,r),d.register(f.SAVE_CANCEL,t,a),d.register(f.CONFIRM,o,c),d.register(f.CANCEL,n,C),function(e,t){return t=i(t),new e.module(t)});return{create:function(t,e){var o,n=t.type||f.DEFAULT,r=!!t.large,a={},c=((c=d.get(n))||s.exception({message:"Unable to find modal of type: "+n}),void 0!==t.templateContext&&(a=t.templateContext),n=a,a=(o=c).template,v.render(a,n).then(function(e){e=i(e);return _(o,e)}).fail(s.exception).then(function(e){return void 0!==t.title&&e.setTitle(t.title),void 0!==t.body&&e.setBody(t.body),void 0!==t.footer&&e.setFooter(t.footer),r&&e.setLarge(),e}));return void 0!==e&&m(c,e,t),c},types:f}});