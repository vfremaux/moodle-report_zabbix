!function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(U){var t=Object.prototype.toString,j=Array.isArray||function(e){return"[object Array]"===t.call(e)};function p(e){return"function"==typeof e}function S(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var r=RegExp.prototype.test;var n=/\S/;function A(e){return!r.call(n,e)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var I=/\s*/,O=/\s+/,$=/\s*=/,P=/\s*\}/,R=/#|\^|\/|>|\{|&|=|!|\$|</;function c(l,u){if(!l)return[];var h,t,f,d=[],e=[],r=[],g=!1,v=!1;function y(e){if("string"==typeof e&&(e=e.split(O,2)),!j(e)||2!==e.length)throw new Error("Invalid tags: "+e);h=new RegExp(S(e[0])+"\\s*"),t=new RegExp("\\s*"+S(e[1])),f=new RegExp("\\s*"+S("}"+e[1]))}y(u||U.tags);for(var n,o,i,k,w,s,a=new C(l);!a.eos();){if(n=a.pos,i=a.scanUntil(h))for(var b=0,x=i.length;b<x;++b)if(A(k=i.charAt(b))?r.push(e.length):v=!0,e.push(["text",k,n,n+1]),n+=1,"\n"===k){if(g&&!v)for(;r.length;)delete e[r.pop()];else r=[];v=g=!1}if(!a.scan(h))break;if(g=!0,o=a.scan(R)||"name",a.scan(I),"="===o?(i=a.scanUntil($),a.scan($),a.scanUntil(t)):"{"===o?(i=a.scanUntil(f),a.scan(P),a.scanUntil(t),o="&"):i=a.scanUntil(t),!a.scan(t))throw new Error("Unclosed tag at "+a.pos);if(w=[o,i,n,a.pos],e.push(w),"#"===o||"^"===o||"$"===o||"<"===o)d.push(w);else if("/"===o){if(!(s=d.pop()))throw new Error('Unopened section "'+i+'" at '+n);if(s[1]!==i)throw new Error('Unclosed section "'+s[1]+'" at '+n)}else"name"===o||"{"===o||"&"===o?v=!0:"="===o&&y(i)}if(s=d.pop())throw new Error('Unclosed section "'+s[1]+'" at '+a.pos);for(var c,m=function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(e),V=[],T=V,p=[],B=0,E=m.length;B<E;++B)switch((c=m[B])[0]){case"$":case"<":case"#":case"^":T.push(c),p.push(c),T=c[4]=[];break;case"/":p.pop()[5]=c[2],T=0<p.length?p[p.length-1][4]:V;break;default:T.push(c)}return V}function C(e){this.string=e,this.tail=e,this.pos=0}function o(e,t){this.view=e,this.blocks={},this.cache={".":this.view},this.parent=t}function e(){this.cache={}}C.prototype.eos=function(){return""===this.tail},C.prototype.scan=function(e){e=this.tail.match(e);if(!e||0!==e.index)return"";e=e[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e},C.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},o.prototype.push=function(e){return new o(e,this)},o.prototype.setBlockVar=function(e,t){return this.blocks[e]=t},o.prototype.clearBlockVars=function(){this.blocks={}},o.prototype.getBlockVar=function(e){var t,r=this.blocks;return r.hasOwnProperty(e)?t=r[e]:this.parent&&(t=this.parent.getBlockVar(e)),t},o.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var n,o,i=this,s=!1;i;){if(0<e.indexOf("."))for(t=i.view,n=e.split("."),o=0;null!=t&&o<n.length;)o===n.length-1&&(s=a(t,n[o])),t=t[n[o++]];else t=i.view[e],s=a(i.view,e);if(s)break;i=i.parent}r[e]=t}return t=p(t)?t.call(this.view):t},e.prototype.clearCache=function(){this.cache={}},e.prototype.parse=function(e,t){var r=this.cache,n=r[e];return n=null==n?r[e+":"+(t||U.tags).join(":")]=c(e,t):n},e.prototype.render=function(e,t,r){var n=this.parse(e),t=t instanceof o?t:new o(t);return this.renderTokens(n,t,r,e)},e.prototype.renderTokens=function(e,t,r,n){for(var o,i,s,a="",c=0,p=e.length;c<p;++c)s=void 0,"#"===(i=(o=e[c])[0])?s=this.renderSection(o,t,r,n):"^"===i?s=this.renderInverted(o,t,r,n):">"===i?s=this.renderPartial(o,t,r,n):"<"===i?s=this.renderBlock(o,t,r,n):"$"===i?s=this.renderBlockVariable(o,t,r,n):"&"===i?s=this.unescapedValue(o,t):"name"===i?s=this.escapedValue(o,t):"text"===i&&(s=this.rawValue(o)),void 0!==s&&(a+=s);return a},e.prototype.renderSection=function(e,t,r,n){var o=this,i="",s=t.lookup(e[1]);if(s){if(j(s))for(var a=0,c=s.length;a<c;++a)i+=this.renderTokens(e[4],t.push(s[a]),r,n);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)i+=this.renderTokens(e[4],t.push(s),r,n);else if(p(s)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(t.view,n.slice(e[3],e[5]),function(e){return o.render(e,t,r)}))&&(i+=s)}else i+=this.renderTokens(e[4],t,r,n);return i}},e.prototype.renderInverted=function(e,t,r,n){var o=t.lookup(e[1]);if(!o||j(o)&&0===o.length)return this.renderTokens(e[4],t,r,n)},e.prototype.renderPartial=function(e,t,r){if(r)return e=p(r)?r(e[1]):r[e[1]],null!=e?this.renderTokens(this.parse(e),t,r,e):void 0},e.prototype.renderBlock=function(e,t,r,n){var o;if(r)return o=p(r)?r(e[1]):r[e[1]],null!=o&&t.clearBlockVars(),this.renderTokens(e[4],t,r,n),e=this.renderTokens(this.parse(o),t,r,o),t.clearBlockVars(),e},e.prototype.renderBlockVariable=function(e,t,r,n){var o=e[1],i=t.getBlockVar(o);return i?this.renderTokens(this.parse(i),t,r,i):(t.setBlockVar(o,n.slice(e[3],e[5])),this.renderTokens(e[4],t,r,n))},e.prototype.unescapedValue=function(e,t){t=t.lookup(e[1]);if(null!=t)return t},e.prototype.escapedValue=function(e,t){t=t.lookup(e[1]);if(null!=t)return U.escape(t)},e.prototype.rawValue=function(e){return e[1]},U.name="mustache.js",U.version="2.3.0",U.tags=["{{","}}"];var i=new e;return U.clearCache=function(){return i.clearCache()},U.parse=function(e,t){return i.parse(e,t)},U.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(j(n=e)?"array":typeof n)+'" was given as the first argument for mustache#render(template, view, partials)');var n;return i.render(e,t,r)},U.to_html=function(e,t,r,n){e=U.render(e,t,r);if(!p(n))return e;n(e)},U.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return s[e]})},U.Scanner=C,U.Context=o,U.Writer=e,U});