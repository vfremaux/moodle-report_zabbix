define(["core/ajax","jquery"],function(r,c){return{processResults:function(t,e){for(var o=[],n=0,r=String(c(t).data("exclude")).split(","),n=0;n<e.cohorts.length;n++)-1===r.indexOf(String(e.cohorts[n].id))&&o.push({value:e.cohorts[n].id,label:e.cohorts[n].name});return o},transport:function(t,e,o,n){void 0===e&&(e="");t=c(t).data("contextid"),e=r.call([{methodname:"core_cohort_search_cohorts",args:{query:e,includes:"parents",limitfrom:0,limitnum:100,context:{contextid:t}}}]);c.when.apply(c.when,e).done(function(t){o(t)}).fail(n)}}});