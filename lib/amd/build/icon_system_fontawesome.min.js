define(["core/icon_system","jquery","core/ajax","core/mustache","core/localstorage","core/url"],function(e,t,n,i,o,c){function r(){e.apply(this,arguments)}var u=null,a=null;return(r.prototype=Object.create(e.prototype)).init=function(){if(u)return t.when(this);var e=o.get("core/iconmap-fontawesome");return(e=e&&JSON.parse(e))?(u=e,t.when(this)):(a=null===a?n.call([{methodname:"core_output_load_fontawesome_icon_map",args:[]}],!0,!1)[0]:a).then(function(e){return u={},t.each(e,function(e,t){u[t.component+"/"+t.pix]=t.to}),o.set("core/iconmap-fontawesome",JSON.stringify(u)),this}.bind(this))},r.prototype.renderIcon=function(e,t,n,o){var r=u[t+"/"+e],a=!1,r={key:r,title:n,alt:n,unmappedIcon:a=void 0===r?{attributes:[{name:"src",value:c.imageUrl(e,t)},{name:"alt",value:n},{name:"title",value:n}]}:a};return i.render(o,r).trim()},r.prototype.getTemplateName=function(){return"core/pix_icon_fontawesome"},r});