define(["core/config"],function(e){function t(t){this.storage=t,this.supported=this.detectSupport(),this.hashSource=e.wwwroot+"/"+e.jsrev,this.hash=this.hashString(this.hashSource),this.prefix=this.hash+"/",this.jsrevPrefix=this.hashString(e.wwwroot)+"/jsrev",this.validateCache()}return t.prototype.detectSupport=function(){if(-1==e.jsrev)return!1;if(void 0===this.storage)return!1;var t="test";try{return null===this.storage?!1:(this.storage.setItem(t,"1"),this.storage.removeItem(t),!0)}catch(t){return!1}},t.prototype.prefixKey=function(t){return this.prefix+t},t.prototype.validateCache=function(){var t=this.storage.getItem(this.jsrevPrefix);null!==t?e.jsrev!=t&&(this.storage.clear(),this.storage.setItem(this.jsrevPrefix,e.jsrev)):this.storage.setItem(this.jsrevPrefix,e.jsrev)},t.prototype.hashString=function(t){var e,r,s=0;if(0===t.length)return s;for(e=0,r=t.length;e<r;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return s},t.prototype.get=function(t){return!!this.supported&&(t=this.prefixKey(t),this.storage.getItem(t))},t.prototype.set=function(t,e){if(!this.supported)return!1;t=this.prefixKey(t);try{this.storage.setItem(t,e)}catch(t){return!1}return!0},t});