define(["jquery"],function(c){var t={SCROLL_THRESHOLD:30,SCROLL_FREQUENCY:1e3/60,SCROLL_SPEED:.5,scrollingId:null,scrollAmount:0,callback:null,start:function(o){c(window).on("mousemove",t.mouseMove),c(window).on("touchmove",t.touchMove),t.callback=o},stop:function(){c(window).off("mousemove",t.mouseMove),c(window).off("touchmove",t.touchMove),null!==t.scrollingId&&t.stopScrolling()},touchMove:function(o){for(var n=0;n<o.changedTouches.length;n++)t.handleMove(o.changedTouches[n].clientX,o.changedTouches[n].clientY)},mouseMove:function(o){t.handleMove(o.clientX,o.clientY)},handleMove:function(o,n){n<t.SCROLL_THRESHOLD?t.scrollAmount=-Math.min(t.SCROLL_THRESHOLD-n,t.SCROLL_THRESHOLD):n>c(window).height()-t.SCROLL_THRESHOLD?t.scrollAmount=Math.min(n-(c(window).height()-t.SCROLL_THRESHOLD),t.SCROLL_THRESHOLD):t.scrollAmount=0,t.scrollAmount&&null===t.scrollingId?t.startScrolling():t.scrollAmount||null===t.scrollingId||t.stopScrolling()},startScrolling:function(){var l=c(document).height()-c(window).height();t.scrollingId=window.setInterval(function(){var o=c(window).scrollTop(),n=Math.round(t.scrollAmount*t.SCROLL_SPEED);0!==(n=l<o+(n=o+n<0?-o:n)?l-o:n)&&(c(window).scrollTop(o+n),0!=(n=c(window).scrollTop()-o)&&t.callback&&t.callback(n))},t.SCROLL_FREQUENCY)},stopScrolling:function(){window.clearInterval(t.scrollingId),t.scrollingId=null}};return{start:t.start,stop:t.stop}});