define(["jquery","core/modal_factory","core/templates","core/str","core/notification"],function(c,r,i,a,l){return{init:function(n){var e=c("[data-key=addblock]"),t=n.blocks.map(function(e){return{key:"pluginname",component:"block_"+e}}),t=a.get_strings(t).then(function(e){return e.map(function(e,t){return{name:n.blocks[t],title:e}})}).then(function(e){return n.blocks=e,i.render("core/add_block_body",n)}).fail(l.exception),o=a.get_string("addblock").fail(l.exception);r.create({title:o,body:t,type:"CANCEL"},e)}}});