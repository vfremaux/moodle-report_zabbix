define(["jquery","core/log"],function(s,t){var n={captured:null,selectedoptions:[],init:function(e){s(".orderedselect-delete").bind("click",this.removeselecteditem),s(".orderedselect-select").bind("change",this.updatevalues),s(".orderedselect-option").bind("mousedown",this.captureselecteditem),s(".orderedselect-option").bind("mousedrag",this.drag),s(".orderedselect-option").bind("mouseup",this.releaseselecteditem),this.selectedoptions=e.options,t.debug("AMD orderedselect initialized")},toggleoption:function(){var e=s(this),t=e.nearest("select"),o="#"+t.attr("id")+"-value",i="#"+t.attr("id")+"-selection";if(iselected)$newnode=s(i).appendNode(),selectedoptions[e.attr("value")]=newnode,s(o).html(n.selectedoptions.join(","));else{for(opt in removedoptions=new Array,selectedoptions)opt!=e.attr("value")&&(removedoptions[opt]=selectedoptions[opt]);s(o).html(n.removedoptions.join(","));o=t.attr("id")+"-"+e.attr("value");s(i).deleteNode(o)}},captureselecteditem:function(e){e.preventDefault(),e.stopPropagation();e=s(this);(n.captured=e).css("position","absolute"),e.css("opacity",.5)},dragselecteditem:function(e){e.preventDefault(),e.stopPropagation(),s(this).attr("id")===n.captured&&n.captured},releaseselecteditem:function(e){e.preventDefault(),e.stopPropagation();e=s(this);n.captured=null,e.css("position",""),e.css("opacity",1)},removeselecteditem:function(){s(this).nearest("orderedselect-option")}};return n});