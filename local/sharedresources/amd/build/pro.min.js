define(["jquery","core/log","core/config"],function(a,r,m){var p={component:"local_sharedresources",shortcomponent:"local_sharedresources",componentpath:"/local/sharedresources",init:function(){var e="#id_s_"+p.component+"_licensekey";a(e).bind("change",this.check_product_key),a(e).trigger("change"),r.debug("AMD Pro js initialized for "+p.component+" system")},check_product_key:function(){var r="#id_s_"+p.component+"_licensekey",e=a(this),o=e.val().replace(/-/g,""),c=o.substr(0,14),o=o.substr(14,2),c=localsharedresourcepro.checksum(c),i=' <img src="'+m.wwwroot+'/pix/i/valid.png">',t=' <img src="'+m.wwwroot+'/pix/i/warning.png">',n=' <img src="'+m.wwwroot+'/pix/i/invalid.png">',s=' <img src="'+m.wwwroot+'/pix/i/ajaxloader.gif">';o===c?(o=(o=(o=m.wwwroot+"/"+p.componentpath+"/pro/ajax/services.php?what=license&service=check")+"&customerkey="+e.val())+"&provider="+a("#id_s_"+p.component+"_licenseprovider").val(),a(r+" + img").remove(),a(r).after(s),a.get(o,function(e){e.match(/SET OK/)?e.match(/-\d+.*$/)?(a(r+" + img").remove(),a(r).after(t)):(a(r+" + img").remove(),a(r).after(i)):(a(r+" + img").remove(),a(r).after(n))},"html")):(a(r+" + img").remove(),a(r).after(t))},checksum:function(e){var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),c=o.length,i=e.split(""),t=0;for(r in i)t+=i[r].charCodeAt(0);e=Math.floor(t/c)%c;return""+o[t%c]+o[e]}};return p});