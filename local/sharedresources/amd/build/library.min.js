define(["jquery","core/config","core/log","core/str"],function(o,c,s,t){var a={strs:[],init:function(e){t.get_strings([{key:"confirmresourceforcedeletion",component:"local_sharedresources"},{key:"confirmresourcedeletion",component:"local_sharedresources"}]).done(function(e){a.strs=e});var r=o(this);o(".resourceitem").hover(function(){r.css("background-color","#fcfcfc")},function(){r.css("background-color","#f8f8f8")}),o(".sharedresource-toggle-handle").bind("click",this.toggle_info_panel),o(".sharedresource-mark-like").on("click","",e,this.ajax_mark_like),o(".sharedresource-actionlink").bind("click",this.integrate),o(".sharedresource.delete").bind("click",this.confirm),o(".sharedresource.force-delete").bind("click",this.confirm),s.debug("ADM Shared resource Library JS initialized")},ajax_mark_like:function(){var e=o(this).attr("id").replace("sharedresource-","").split("-"),r=e[0],s=e[1],e=c.wwwroot+"/local/sharedresources/ajax/add_liked_mark.php?";o.get(e+="resid="+s+"&repo="+r,"",function(e){o("#sharedresource-likes-"+s).html(a.sharedresource_print_stars(e,15))},"html")},sharedresource_print_stars:function(e,r){for(var s="",o=0;o<r;o++)s+='<img src="'+(c.wwwroot+"/local/sharedresources/pix/"+(o<e?"star":"star_shadow")+".png")+'" />';return s},toggle_info_panel:function(){var e=o(this).attr("id").replace("sharedresource-toggle-",""),r="none"===o("#sharedresource-info-"+e).css("display")?(o("#sharedresource-info-"+e).css("display","block"),o("#sharedresource-social-"+e).css("display","block"),(r=o("#sharedresource-toggle-"+e).attr("src")).replace("right","top")):(o("#sharedresource-info-"+e).css("display","none"),o("#sharedresource-social-"+e).css("display","none"),(r=o("#sharedresource-toggle-"+e).attr("src")).replace("top","right"));o("#sharedresource-toggle-"+e).attr("src",r)},integrate:function(){var e=o(this).attr("id").match(/id-(\w+)-(\d+)/),r=e[1],e=e[2];document.forms["add"+e].mode.value=r,document.forms["add"+e].submit()},confirm:function(e){var r=0;if(o(this).hasClass("delete")&&(r=1),!confirm(a.strs[r]))return e.preventDefault(),e.stopImmediatePropagation(),!1}};return a});