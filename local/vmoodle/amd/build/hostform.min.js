define(["jquery","core/config","core/log"],function(d,l,a){return{init:function(){d("#id_shortname").bind("change",this.syncSchema),d("#id_testconnection").bind("click",this.opencnxpopup),d("#id_testdatapath").bind("click",this.opendatapathpopup),d("#id_mnet").bind("click",this.switcherservices),a.debug("AMD VMoodle Hostform initialized")},opencnxpopup:function(){var a=d("#id_vdbtype").val(),t=d("#id_vdbhost").val(),e=d("#id_vdblogin").val(),o=d("#id_vdbpass").val(),n=d("#id_vdbname").val(),i=l.wwwroot+"/local/vmoodle/views/management.testcnx.php?";i=(i=(i=(i=(i+="vdbtype="+a)+"&vdbhost="+encodeURIComponent(t))+"&vdblogin="+encodeURIComponent(e))+"&vdbpass="+encodeURIComponent(o))+"&vdbname="+encodeURIComponent(n);window.open(i,"","width=500,height=300,toolbar=no,menubar=no,location=no,scrollbars=no,status=no").document.title="Vmoodle connexion test"},opendatapathpopup:function(){var a=d("#id_vdatapath").val(),t=l.wwwroot+"/local/vmoodle/views/management.testdatapath.php?";t+="dataroot="+escape(a);window.open(t,"","width=500,height=300,toolbar=no,menubar=no,location=no,scrollbars=no,status=no").document.title="VMoodle test data path"},switcherservices:function(){var a=d(this).attr("data-subnet"),t=d("#id_multimnet"),e=d("#id_services");"0"===t.val()||t.val()===a?(e.val("default"),e.attr("disabled",!0)):(e.attr("disabled",!1),e.val("subnetwork"))},syncSchema:function(){var a=d("#id_shortname"),t=d("#id_vdbname"),e=d("#id_vdatapath"),o=d("#id_vhostname");a.val(a.val().replace(/-/g,"_")),a.val(a.val().replace(/ /g,"_")),t.val(t.val().replace(/<%%INSTANCE%%>/g,a.val())),e.val(e.val().replace(/<%%INSTANCE%%>/g,a.val())),o.val(o.val().replace(/<%%INSTANCE%%>/g,a.val()))}}});