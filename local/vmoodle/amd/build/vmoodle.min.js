define(["jquery","core/log"],function(l,e){return{vmoodlestrings:"",init:function(){l(".vmoodle-hide-show-image").bind("click",this.switch_panel),l('#mform12 select[name="platform"]').bind("change",this.remote_filearealist),e.debug("AMD Vmoodle initialised ")},switch_panel:function(){var e=l(this),i=e.attr("id"),a=e.attr("id").replace("id-showctl-",""),e=(e=e.attr("src")).replace("collapsed","expanded");l(".vmoodle-hide-show-image").attr("src",e),e=e.replace("collapsed","expanded"),l("#"+i).attr("src",e),l(".vmoodlecmd-panel").addClass("vmoodle-hidden"),l("#id-vmoodlecmd-panel-"+a).removeClass("vmoodle-hidden")},filtercapabilitytable:function(e){l(".capabilityrow").css("display","table-row"),""!==e.value&&(l(".capabilityrow").css("display","none"),l(".capabilityrow[id*='"+e.value+"']").css("display","table-row"))},remote_filearealist:function(){var e=l(this).val(),i=l("#fitem_id_fileareaid .felement.fselect");l.get(e+"/local/vmoodle/plugins/generic/ajax/get_system_fileareas.php",function(e){i.html(e)},"html")}}});