define(["jquery","core/log","core/config"],function(e,s,h){return{init:function(){e("#ci-pass").bind("change",this.check_pass_code)},check_pass_code:function(s){var t=e(this),a=t.attr("data-product"),i=h.wwwroot+"/local/shop/front/ajax/service.php",o='<img width="14" height="14" src="'+h.wwwroot+'/local/shop/pix/ajaxloader.gif" />',c='<img width="14" height="14" src="'+h.wwwroot+'/local/shop/pix/valid.png" />',d='<img width="14" height="14" src="'+h.wwwroot+'/local/shop/pix/invalid.png" />',o=(e("#ci-pass-status-"+a).html(o),e("#cimod-pass-status-"+a).html(o),t.val()+s.key);e.post(i,{service:"shop",what:"checkpasscode",productname:a,passcode:o},function(s){"passed"==JSON.parse(s).status?(e("#ci-add-to-bag").attr("disabled",null),e("#ci-pass-status-"+a).html(c),e("#cimod-"+a).attr("disabled",null),e("#cimod-pass-status-"+a).html(c)):(e("#ci-add-to-bag").attr("disabled","disabled"),e("#ci-pass-status-"+a).html(d),e("#cimod-pass-status-"+a).html(d))},"html")}}});