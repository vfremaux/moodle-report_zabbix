define(["jquery","core/config","core/log","local_userequipment/bootstrap-select"],function(n,r,t,e){return{init:function(){n(".assignment_button").bind("click",this.load_change_form),n("#modal-status-save").bind("click",this.submit_change_form),t.debug("AMD Userequipment CatPng initialized")},load_change_form:function(){var t=n(this),e='<div class="centered"><center><img id="detail-waiter" src="',a=(e+=r.wwwroot+'/pix/i/ajaxloader.gif" /></center></div>',n("#catpng-edit-inner-form").html(e),t.attr("data-plugintype")),i=t.attr("data-pluginname"),e=r.wwwroot+"/local/userequipment/ajax/service.php";n.get((e+="?what=getplugincategories")+("&type="+a)+("&name="+i),function(t){n("#catpng-edit-inner-form").html(t),n("#modal-status-save").attr("data-plugintype",a),n("#modal-status-save").attr("data-pluginname",i),n(".selectpicker").selectpicker()},"html")},submit_change_form:function(){var t=n(this),e=t.attr("data-pluginname"),a=t.attr("data-plugintype"),t=r.wwwroot+"/local/userequipment/ajax/service.php",i=(t=(t+="?what=updateplugincategories")+("&name="+e)+("&type="+a),n(".selectpicker").val());t+="&categories="+i,console.log(t),n.get(t,function(t){"success"===t.result&&(n("#plugin-categories-"+a+"-"+e).html(t.catset),n("#catpng-inner-form").modal("hide")),n("#catpng-inner-form").modal("hide")},"json")}}});