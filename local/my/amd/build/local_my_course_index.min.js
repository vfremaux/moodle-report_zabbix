define(["jquery","core/config","core/log"],function(t,s,i){return{init:function(){t(".course_category_tree").on("click",".detail-handle",[],this.toggle_detail),t(".course_category_tree").on("click",".add-to-favorites-handle",[],this.add_to_favorites),t(".course_category_tree").on("click",".remove-from-favorites-handle",[],this.remove_from_favorites),0!==t(".is-accordion").length&&(t(".is-accordion .local-my-course").hide(),t(".is-accordion .local-my-cat-collapse > h3 > a").attr("aria-expanded","false")),t(".reload-areas").each(function(){i.debug("Launching refresh on "+t(this).attr("data-widget")+"-"+t(this).attr("data-uid")),t(this).trigger("click")}),this.usereloadwaiter=!0,i.debug("AMD Local My initialized")},add_to_favorites:function(){var a=t(this),e=a.attr("data-course"),o=a.hasClass("light"),r=(r=s.wwwroot+"/local/my/ajax/service.php")+"?what=addtofavorites"+("&courseid="+e);a.removeClass("fa-star-o"),a.addClass("fa-star"),o&&(a.removeClass("add-to-favorites-handle"),a.addClass("remove-from-favorites-handle")),i.debug("Adding course "+e+" to favorites"),t.get(r)},remove_from_favorites:function(){var a=t(this),e=a.attr("data-course"),o=a.hasClass("light"),r=(r=s.wwwroot+"/local/my/ajax/service.php")+"?what=removefromfavorites"+("&courseid="+e);i.debug("Removing course "+e+" from favorites"),t.get(r),t('.icon-favorite[data-course="'+e+'"]').removeClass("fa-star"),t('.icon-favorite[data-course="'+e+'"]').addClass("fa-star-o"),o&&(a.removeClass("fa-star"),a.addClass("fa-star-o"),a.removeClass("remove-from-favorites-handle"),a.addClass("add-to-favorites-handle"))}}});