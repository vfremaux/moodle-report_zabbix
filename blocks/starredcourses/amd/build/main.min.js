define(["jquery","core/notification","block_starredcourses/repository","core/pubsub","core/templates","core_course/events"],function(t,e,n,o,s,c){var i={STARRED_COURSES_REGION_VIEW:'[data-region="starred-courses-view"]',STARRED_COURSES_REGION:'[data-region="starred-courses-view-content"]'},u=function(e,r){return 0<r.length?s.render("block_starredcourses/view-cards",{courses:r}):(r=e.find(i.STARRED_COURSES_REGION_VIEW).attr("data-nocoursesimg"),s.render("block_starredcourses/no-courses",{nocoursesimg:r}))},a=function(r){var t=r.find(i.STARRED_COURSES_REGION);return n.getStarredCourses({limit:0,offset:0}).then(function(e){return u(r,e)}).then(function(e,r){return s.replaceNodeContents(t,e,r)}).catch(e.exception)};return{init:function(e){var r;e=t(e),r=e,o.subscribe(c.favourited,function(){a(r)}),o.subscribe(c.unfavorited,function(){a(r)}),a(e)}}});