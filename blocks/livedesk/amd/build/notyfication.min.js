define(["jquery","core/config","core/str","core/log"],function(t,i,n,o){var a={params:null,init:function(e){a.params=e;n.get_strings([{key:"newmessages",component:"block_livedesk"}]).done(function(e){a.strs=e}),o.debug("AMD Block Livedesk Notyfication initialized")},start:function(){setInterval(a.get_unnotified_messages,a.params.notification_refresh_time),o.debug("AMD Block Livedesk Notifycation started")},get_unnotified_messages:function(){var e=(e=i.wwwroot+"/blocks/livedesk/ajax/service.php?")+"action=get_unnotified_messages&"+("course="+a.params.courseid);t.post(e,function(e){if(""!=e){void 0!==Noty&&Noty.closeAll();for(var t=JSON.parse(e),i=0;i<t.length;i++){var n=t[i].id,o=t[i].message,s='<input name="noty_id'+n,s=(s+='" type="hidden" value='+n+' class="noty_message_num" />')+("<b>"+a.strs[0]+"</b>")+("<div>"+o+"</div>");a.generateNoty(s,"information",n)}}})},generateNoty:function(e,t){return new Noty({text:e,timeout:a.params.notification_onscreen_time,closeWith:["button"],type:t,dismissQueue:!0,layout:a.params.layout,theme:a.params.theme}).show()}};return a});