define(["jquery","core/log","core/config"],function(r,d,l){return{init:function(){r(".pagetracker-toggle-handle").bind("click",this.toggle),d.debug("AMD Page Tracker Initialized")},toggle:function(a){a.stopPropagation();var a=r(this),t=l.wwwroot+"/blocks/page_tracker/ajax/service.php",e=a.attr("id").replace("toggle-page-",""),i=a.attr("data-blockid"),i=(t=(t+="?id="+a.attr("data-courseid"))+("&blockid="+i)+("&itemid="+e),d.debug("AMD Page Tracker : Got for "+a.attr("id")),r('ul[data-parent="'+a.attr("id")+'"]'));i.hasClass("collapsed")?(r("#"+a.attr("id")+" i").removeClass("fa-plus"),r("#"+a.attr("id")+" i").addClass("fa-minus"),i.removeClass("collapsed"),t+="&what=expand"):(i.addClass("collapsed"),r("#"+a.attr("id")+" i").removeClass("fa-minus"),r("#"+a.attr("id")+" i").addClass("fa-plus"),t+="&what=collapse"),r.get(t)}}});