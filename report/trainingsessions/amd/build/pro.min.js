define(["jquery","core/log","core/config"],function(a,i,p){var m={component:"report_trainingsessions",shortcomponent:"report_trainingsessions",componentpath:"report/trainingsessions",init:function(){var e="#id_s_"+m.component+"_licensekey";a(e).bind("change",this.check_product_key),a(e).trigger("change"),i.debug("AMD Pro js initialized for "+m.component+" system")},check_product_key:function(){var i="#id_s_"+m.component+"_licensekey",e=a(this),r=e.val().replace(/-/g,""),o=r.substr(0,14),r=r.substr(14,2),o=m.checksum(o),n=' <img src="'+p.wwwroot+'/pix/i/valid.png">',t=' <img src="'+p.wwwroot+'/pix/i/warning.png">',c=' <img src="'+p.wwwroot+'/pix/i/invalid.png">',s=' <img src="'+p.wwwroot+'/pix/i/ajaxloader.gif">';r===o?(r=(r=(r=p.wwwroot+"/"+m.componentpath+"/pro/ajax/services.php?what=license&service=check")+"&customerkey="+e.val())+"&provider="+a("#id_s_"+m.component+"_licenseprovider").val(),a(i+" + img").remove(),a(i).after(s),a.get(r,function(e){e.match(/SET OK/)?e.match(/-\d+.*$/)?(a(i+" + img").remove(),a(i).after(t)):(a(i+" + img").remove(),a(i).after(n)):(a(i+" + img").remove(),a(i).after(c))},"html")):(a(i+" + img").remove(),a(i).after(t))},checksum:function(e){var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),o=r.length,n=e.split(""),t=0;for(i in n)t+=n[i].charCodeAt(0);e=Math.floor(t/o)%o;return""+r[t%o]+r[e]}};return m});