define(["jquery","core/log","core/config"],function(m,r,p){var s={component:"report_learningtimecheck",shortcomponent:"report_learningtimecheck",componentpath:"report/learningtimecheck",init:function(){var e="#id_s_"+s.component+"_licensekey";m(e).bind("change",this.check_product_key),m(e).trigger("change"),r.debug("AMD Pro js initialized for "+s.component+" system")},check_product_key:function(){var r="#id_s_"+s.component+"_licensekey",e=m(this),i=e.val().replace(/-/g,""),o=i.substr(0,14),i=i.substr(14,2),o=s.checksum(o),t=' <img src="'+p.wwwroot+'/pix/i/valid.png">',n=' <img src="'+p.wwwroot+'/pix/i/warning.png">',c=' <img src="'+p.wwwroot+'/pix/i/invalid.png">',a=' <img src="'+p.wwwroot+'/pix/i/ajaxloader.gif">';i===o?(i=(i=(i=p.wwwroot+"/"+s.componentpath+"/pro/ajax/services.php?what=license&service=check")+"&customerkey="+e.val())+"&provider="+m("#id_s_"+s.component+"_licenseprovider").val(),m(r+" + img").remove(),m(r).after(a),m.get(i,function(e){e.match(/SET OK/)?e.match(/-\d+.*$/)?(m(r+" + img").remove(),m(r).after(n)):(m(r+" + img").remove(),m(r).after(t)):(m(r+" + img").remove(),m(r).after(c))},"html")):(m(r+" + img").remove(),m(r).after(n))},checksum:function(e){var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),o=i.length,t=e.split(""),n=0;for(r in t)n+=t[r].charCodeAt(0);e=Math.floor(n/o)%o;return""+i[n%o]+i[e]}};return s});