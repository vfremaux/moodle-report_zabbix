define(["jquery","core/form-autocomplete","core/str","core/notification"],function(f,n,e,t){var o="#unified-filters";return{init:function(){var c;M.util.js_pending("unified_filter_datasource"),e.get_strings([{key:"userfilterplaceholder",component:"moodle"},{key:"nofiltersapplied",component:"moodle"}]).done(function(e){var i=e[0],e=e[1];n.enhance(o,!0,"core_user/unified_filter_datasource",i,!1,!0,e,!0).then(function(){M.util.js_complete("unified_filter_datasource")}).fail(t.exception)}).fail(t.exception),c=f(o).val(),f(o).on("change",function(){var e=f(this).val(),t=[],o=[],r=!1;if(f.each(e,function(e,i){var n=i.split(":",2);if(2!==n.length)return o.push(i),!0;i=n[0],n=n[1];return void 0!==t[i]&&(r=!0),t[i]=n,!0}),r){var i,n=[];for(i in t)n.push(i+":"+t[i]);n=n.concat(o),f(this).val(n)}c.join(",")!=e.join(",")&&this.form.submit()})},getForm:function(){return f(o).closest("form")}}});