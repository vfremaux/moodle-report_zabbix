define(["jquery","core/notification","core_calendar/selectors","core_calendar/events","core/templates","core_calendar/view_manager"],function(h,d,l,n,e,v){return{init:function(e){var u,i;e=h(e),u=e,h("body").on(n.monthChanged,function(n,t,a,r,o){u.queue(function(e){return i(n,t,a,r,o).then(function(){return e()}).fail(d.exception)})}),i=function(f,e,n,t,a){var r,o,i,e=u.find('[data-year="'+e+'"][data-month="'+n+'"]').closest(l.calendarPeriods.month),n=u.find(l.calendarPeriods.month),d=h(n[0]),n=h(n[2]),c=h("<span>"),s=(c.attr("data-template","core_calendar/threemonth_month"),c.attr("data-includenavigation",!1),c.attr("data-mini",!0),h("<div>"));return s.hide(),s.append(c),e.is(d)?(s.insertBefore(d),r=d.data("previousYear"),o=d.data("previousMonth"),i=n):e.is(n)&&(s.insertAfter(n),r=n.data("nextYear"),o=n.data("nextMonth"),i=d),v.refreshMonthContent(c,r,o,t,a,c).then(function(){var e=h.Deferred(),n=h.Deferred();return i.slideUp("fast",function(){h(this).remove(),e.resolve()}),s.slideDown("fast",function(){n.resolve()}),h.when(e,n)})}}}});