define(["jquery","core_calendar/selectors","core_calendar/events","core_calendar/view_manager"],function(i,l,c,f){function u(e){var e=e.data,n=i("body"),t="."+e.attr("id");e.is(":visible")?f.reloadCurrentMonth(e):(n.off(c.created+t),n.off(c.deleted+t),n.off(c.updated+t),n.off(c.eventMoved+t))}return{init:function(e,n){var t,o,d,r,a;e=i(e),f.init(e),t=e,i("body").on(c.filterChanged,function(e,n){t.find(l.eventType[n.type]).toggleClass("calendar_event_"+n.type,!n.hidden)}),o="."+t.attr("id"),i("body").on("change"+o,l.elements.courseSelector,function(){var e;t.is(":visible")?(e=i(this).val(),f.reloadCurrentMonth(t,e,null)):i("body").off("change"+o)}),d=e,r=i("body"),a="."+d.attr("id"),r.on(c.created+a,d,u),r.on(c.deleted+a,d,u),r.on(c.updated+a,d,u),r.on(c.eventMoved+a,d,u),n&&f.reloadCurrentMonth(e)}}});